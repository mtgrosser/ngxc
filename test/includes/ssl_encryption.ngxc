define :vserver do |host, ipaddr|
  server ipaddr do
    server_name host
    ssl_encryption host
  end
end

define :ssl_encryption do |host|
  ssl_certificate      "/etc/ssl/private/#{host}.crt"
  ssl_certificate_key  "/etc/ssl/private/#{host}.key"

  ssl_session_cache   'shared:SSL:1m'
  ssl_session_timeout '5m'

  ssl_ciphers                 'HIGH:!aNULL:!MD5'
  ssl_prefer_server_ciphers   :on
end
